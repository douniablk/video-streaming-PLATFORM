<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Adaptive Video Player 2</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#1a202c;min-height:100vh}
    .header{background:rgba(255,255,255,.98);backdrop-filter:blur(10px);padding:20px 40px;box-shadow:0 2px 20px rgba(0,0,0,.08);position:sticky;top:0;z-index:100}
    .header-content{max-width:1800px;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
    .logo{display:flex;align-items:center;gap:12px}
    .logo-icon{width:40px;height:40px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:20px}
    .logo h1{font-size:24px;font-weight:700;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .back-btn{background:#fff;border:2px solid #e2e8f0;color:#4a5568;padding:10px 24px;border-radius:12px;cursor:pointer;font-size:14px;font-weight:600;transition:.3s;text-decoration:none;display:flex;align-items:center;gap:8px}
    .back-btn:hover{background:#f7fafc;border-color:#667eea;color:#667eea;transform:translateY(-2px);box-shadow:0 4px 12px rgba(102,126,234,.2)}
    .container{max-width:1800px;margin:0 auto;padding:40px 40px 60px}
    .split-layout{display:grid;grid-template-columns:1fr 400px;gap:24px;align-items:start}
    .player-section{background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 10px 40px rgba(0,0,0,.1)}
    .player-wrapper{position:relative;background:#000}
    video{width:100%;display:block;max-height:75vh}
    .video-overlay{position:absolute;top:20px;left:20px;right:20px;display:flex;gap:10px;pointer-events:none;z-index:10}
    .overlay-badge{background:rgba(0,0,0,.75);backdrop-filter:blur(10px);padding:8px 16px;border-radius:10px;font-size:13px;font-weight:600;color:#fff;display:flex;align-items:center;gap:6px}
    .quality-badge{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}
    .bandwidth-badge{background:rgba(0,0,0,.75)}
    .controls-wrapper{padding:24px;background:#f7fafc;border-top:1px solid #e2e8f0}
    .controls-label{font-size:13px;font-weight:600;color:#718096;text-transform:uppercase;letter-spacing:.5px;margin-bottom:12px}
    .quality-chips{display:flex;gap:10px;flex-wrap:wrap}
    .chip{padding:10px 20px;border:2px solid #e2e8f0;background:#fff;border-radius:12px;cursor:pointer;font-size:14px;font-weight:600;transition:.3s;color:#4a5568;display:inline-flex;align-items:center;gap:6px;flex:1;justify-content:center}
    .chip.small{padding:12px 20px;font-size:13px}
    .chip:hover{border-color:#667eea;color:#667eea;transform:translateY(-2px);box-shadow:0 4px 12px rgba(102,126,234,.15)}
    .chip.active{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-color:#667eea;color:#fff;box-shadow:0 4px 16px rgba(102,126,234,.3)}
    .segments-panel{background:#fff;border-radius:20px;box-shadow:0 10px 40px rgba(0,0,0,.1);display:flex;flex-direction:column;max-height:calc(100vh - 180px);position:sticky;top:120px}
    .segments-panel-header{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;font-weight:700;font-size:16px;border-radius:20px 20px 0 0}
    .segments-count{background:rgba(255,255,255,.2);padding:6px 12px;border-radius:999px;font-size:12px;font-weight:700}
    .segments-panel-list{overflow-y:auto;padding:16px;flex:1;scrollbar-width:thin;scrollbar-color:#cbd5e0 #f7fafc}
    .segments-panel-list::-webkit-scrollbar{width:8px}
    .segments-panel-list::-webkit-scrollbar-track{background:#f7fafc}
    .segments-panel-list::-webkit-scrollbar-thumb{background:#cbd5e0;border-radius:4px}
    .segments-panel-list::-webkit-scrollbar-thumb:hover{background:#a0aec0}
    .segments-panel-actions{display:flex;gap:12px;padding:16px 24px;border-top:1px solid #e2e8f0;background:#f7fafc;border-radius:0 0 20px 20px}
    .segment-item{display:grid;grid-template-columns:100px 1fr auto;gap:12px;padding:12px;cursor:pointer;align-items:center;transition:.2s;border:2px solid #edf2f7;border-radius:12px;margin-bottom:10px;background:#fff}
    .segment-item:hover{background:#f7fafc;border-color:#cbd5e0}
    .segment-item.active{border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,.15);background:linear-gradient(135deg,rgba(102,126,234,.08) 0%,rgba(118,75,162,.08) 100%)}
    .segment-thumb{width:100px;height:56px;background:#e2e8f0;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#a0aec0;font-weight:700;font-size:14px;overflow:hidden}
    .segment-thumb img{width:100%;height:100%;object-fit:cover}
    .segment-title{font-size:14px;font-weight:700;color:#2d3748;margin-bottom:4px}
    .segment-meta{font-size:12px;color:#718096;display:flex;gap:6px;align-items:center}
    .segment-size{font-size:11px;color:#718096;font-weight:600;padding:6px 10px;background:#f7fafc;border-radius:999px}
    .error-message{padding:40px;text-align:center;color:#e53e3e;font-size:15px;font-weight:500}
    .loading{padding:40px 20px;text-align:center;color:#718096;font-weight:500;display:flex;flex-direction:column;align-items:center;gap:12px;font-size:14px}
    .loading i{font-size:32px;color:#667eea;animation:spin 1s linear infinite}
    .buffer-info{padding:12px;background:#f0f4ff;border-radius:10px;font-size:13px;color:#2d3748;margin-bottom:12px;display:flex;gap:8px;align-items:center}
    .buffer-bar{width:100%;height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden}
    .buffer-fill{height:100%;background:linear-gradient(90deg,#667eea 0%,#764ba2 100%);transition:width .3s}
    .abr-status{padding:8px 12px;background:#f7fafc;border-radius:8px;font-size:11px;color:#4a5568;font-weight:600;border-left:3px solid #667eea}
    .error-alert{padding:16px;background:#fed7d7;border-left:4px solid #e53e3e;border-radius:8px;color:#c53030;font-size:14px;margin-bottom:12px}
    @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
    @media(max-width:1200px){.split-layout{grid-template-columns:1fr 350px}}
    @media(max-width:968px){.split-layout{grid-template-columns:1fr}.segments-panel{max-height:500px;position:static}}
    @media(max-width:768px){.header{padding:16px 20px}.container{padding:20px 20px 40px}.video-overlay{top:10px;left:10px;right:10px}.overlay-badge{padding:6px 12px;font-size:11px}.segments-panel{max-height:400px}.segment-item{grid-template-columns:80px 1fr auto}.segment-thumb{width:80px;height:45px}}
  </style>
</head>
<body>
  <div class="header">
    <div class="header-content">
      <div class="logo">
        <div class="logo-icon"><i class="fa-solid fa-rocket"></i></div>
        <h1>Adaptive Player 2</h1>
      </div>
      <a href="/" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Back to Home</a>
    </div>
  </div>
  <div class="container">
    <div class="split-layout">
      <div class="player-section">
        <div class="player-wrapper">
          <video id="video" controls playsinline></video>
          <div class="video-overlay">
            <div class="overlay-badge quality-badge" id="qualityBadge"><i class="fa-solid fa-video"></i> Auto</div>
            <div class="overlay-badge bandwidth-badge" id="bandwidthBadge"><i class="fa-solid fa-signal"></i> — kbps</div>
          </div>
        </div>
        <div class="controls-wrapper">
          <div class="controls-label">Quality Settings</div>
          <div class="quality-chips" id="qualitySelect"></div>
        </div>
      </div>
      <div class="segments-panel">
        <div class="segments-panel-header">
          <span><i class="fa-solid fa-list"></i> Segments</span>
          <span class="segments-count" id="segmentInfo">Loading…</span>
        </div>
        <div class="segments-panel-list" id="segmentList">
          <div class="loading"><i class="fa-solid fa-spinner"></i><div>Loading segments...</div></div>
        </div>
        <div class="segments-panel-actions">
          <div style="flex:1;display:flex;flex-direction:column;gap:8px">
            <div class="abr-status"><i class="fa-solid fa-bolt"></i> ABR: <span id="abrStatus">Auto</span></div>
            <div style="font-size:12px;color:#718096"><i class="fa-solid fa-layer-group"></i> Segment: <span id="currentSegment">-</span></div>
            <div class="buffer-bar"><div id="bufferProgress" class="buffer-fill" style="width:0%"></div></div>
            <div style="font-size:11px;color:#718096">Buffer: <span id="bufferStatus">0%</span></div>
          </div>
        </div>
      </div>
    </div>
    <div id="alert" style="margin-top:24px"></div>
  </div>
  <script src="player2.js"></script>
</body>
</html>
